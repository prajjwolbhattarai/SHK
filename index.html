<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SHK Rhein-Neckar | Branchenmagazin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      .writing-mode-vertical { writing-mode: vertical-rl; }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Montserrat', 'sans-serif'],
            },
            colors: {
              'brand-dark': '#0f172a',
              'brand-copper': '#b45309',
              'brand-steel': '#475569',
              'brand-surface': '#f8fafc',
            },
            animation: {
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
              'fade-in': 'fadeIn 1s ease-out forwards',
            },
            keyframes: {
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              }
            }
          }
        }
      }
    </script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.10.1"
  }
}
</script>
</head>
<body class="bg-brand-surface text-slate-900 antialiased selection:bg-brand-copper selection:text-white">

    <div id="header-container"></div>

    <main id="main-content">
        <!-- Content is rendered by JavaScript -->
    </main>
    
    <div id="footer-container"></div>

<script>
// V A N I L L A   J S   A P P L I C A T I O N

// --- 1. DATA STORE ---
const INITIAL_CATEGORIES = ['Branchen-News', 'Betriebs-Features', 'Personal & Karriere', 'Technologie', 'Energie & Nachhaltigkeit', 'Regional'];
const generateContent = (title, topic, imageKeyword) => `
  <p class="lead">In der heutigen Ausgabe von SHK Rhein-Neckar widmen wir uns dem Thema <strong>${topic}</strong>. Ein Bereich, der f√ºr Fachhandwerker in der Region immer wichtiger wird.</p>
  <h2>Warum ${topic} jetzt relevant ist</h2>
  <p>Die Branche befindet sich im Wandel. Experten sind sich einig: Wer jetzt nicht handelt, verliert den Anschluss. In Mannheim und Heidelberg sehen wir bereits, wie f√ºhrende Betriebe diese Entwicklung f√ºr sich nutzen.</p>
  <figure>
    <img src="https://images.unsplash.com/photo-${imageKeyword}?auto=format&fit=crop&q=80&w=1200" alt="${topic}" style="width: 100%; border-radius: 4px; margin: 32px 0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
    <figcaption style="text-align: center; font-size: 0.9em; color: #666; margin-top: -20px; margin-bottom: 32px; font-style: italic;">Praxisbeispiel: ${topic} im Einsatz.</figcaption>
  </figure>
  <h3>Herausforderungen in der Praxis</h3>
  <p>Nat√ºrlich ist die Umstellung nicht ohne H√ºrden. Materialengp√§sse, Fachkr√§ftemangel und b√ºrokratische H√ºrden bremsen oft die Euphorie. Doch die Zahlen sprechen eine klare Sprache: Die Investition lohnt sich langfristig.</p>
  <blockquote>"Wir haben unsere Prozesse komplett auf ${topic} ausgerichtet und konnten die Effizienz um 30% steigern." ‚Äì Ein lokaler Handwerksmeister</blockquote>
  <h3>Fazit f√ºr Ihren Betrieb</h3>
  <p>Nutzen Sie die kommenden Monate, um sich in diesem Bereich weiterzubilden. Die Handwerkskammer und lokale Innungen bieten entsprechende Schulungen an.</p>
  <ul><li>Pr√ºfen Sie Ihre aktuelle Aufstellung bez√ºglich ${topic}.</li><li>Sprechen Sie mit Ihren Lieferanten √ºber neue M√∂glichkeiten.</li><li>Schulen Sie Ihre Mitarbeiter fr√ºhzeitig.</li></ul>`;
const ARTICLE_DATA = {
  'Branchen-News': [{ t: 'Neue Energieverordnungen 2025: Was gilt ab Januar?', img: '1497366216548-37526070297c' }, { t: 'R√ºckblick ISH Messe Frankfurt: Die Highlights', img: '1542744173-8e7e53415bb0' }, { t: 'Gro√ühandelspreise stabilisieren sich endlich', img: '1586528116311-ad8dd3c8310d' }, { t: 'Fusion von zwei gro√üen Heizungs-Herstellern', img: '1507679721845-63bd00e6183b' }, { t: 'Handwerkermangel erreicht neuen H√∂hepunkt', img: '1504328345606-18bbc8c9d7d1' }, { t: 'Digitalisierungspflicht f√ºr Bauantr√§ge kommt', img: '1454165804606-c3d57bc86b40' }, { t: 'Neue DIN-Normen f√ºr Trinkwasserhygiene', img: '1532601224476-15c79f2f7a51' }, { t: 'F√∂rderstopp f√ºr reine Gasheizungen beschlossen', img: '1621905251189-08b45d6a269e' }, { t: 'SHK-Konjunkturbarometer Q3: Stimmung gemischt', img: '1590283603385-17ffb3a7f29f' }, { t: 'Lieferengp√§sse bei W√§rmepumpen beendet', img: '1513828583688-601bf3925e2e' }, { t: 'Tarifverhandlungen im Handwerk: Einigung erzielt', img: '1521791136064-7986c2920216' }, { t: 'Smart-Home Standards endlich vereinheitlicht', img: '1558002038-1091a1661116' }],
  'Betriebs-Features': [{ t: 'Wie M√ºller & S√∂hne komplett papierlos wurden', img: '1516321318423-f06f85e504b3' }, { t: 'Erfolgsgeschichte: Vom Ein-Mann-Betrieb zur GmbH', img: '1556761175-5973dc0f32e7' }, { t: 'Nachfolgeplanung: Wenn der Junior √ºbernimmt', img: '1519389950476-295375a3c876' }, { t: 'Werkstatt-Optimierung nach Lean-Prinzipien', img: '1581091226825-a6a2a5aee158' }, { t: 'Kundenbindung durch digitale Wartungsvertr√§ge', img: '1551288049-bebda4e38f71' }, { t: 'Fuhrpark-Management: E-Mobilit√§t im Handwerk', img: '1593941707882-a5bba14938c7' }, { t: 'B√ºro-Organisation: Tools die Zeit sparen', img: '1497215728101-856f4ea42174' }, { t: 'Marketing f√ºr Handwerker: Instagram & Co', img: '1611162617474-5b21e879e113' }, { t: 'Die perfekte Baustellen-Dokumentation', img: '1503387762-592deb58ef4e' }, { t: 'Effiziente Lagerhaltung: Nie wieder Suchen', img: '1586528116311-ad8dd3c8310d' }, { t: 'Mitarbeitermotivation im stressigen Alltag', img: '1522071820081-009f0129c71c' }, { t: 'Finanzierung von Gro√üprojekten sicherstellen', img: '1554224155-8d04cb21cd6c' }],
  'Personal & Karriere': [{ t: 'Azubi-Recruiting auf TikTok: Ein Leitfaden', img: '1611162616305-c69b3fa7fbe0' }, { t: 'Frauen im SHK-Handwerk: Ein Portr√§t', img: '1573496359142-b8d87734a5a2' }, { t: 'Gehaltsreport 2025: Was verdient ein Meister?', img: '1554224155-8d04cb21cd6c' }, { t: 'Weiterbildung zum Geb√§ude-Energieberater', img: '1517048696773-61f6231e4c03' }, { t: 'Work-Life-Balance auf Montage: Geht das?', img: '1501504905252-473c47e087f8' }, { t: 'F√ºhrungskr√§fte-Training f√ºr Jungmeister', img: '1519389950476-295375a3c876' }, { t: 'Quereinsteiger erfolgreich ins Team integrieren', img: '1521791136064-7986c2920216' }, { t: 'Gesundheitsmanagement: R√ºcken schonen', img: '1571019614242-c5c5dee9f50b' }, { t: 'Die 4-Tage-Woche im Praxistest', img: '1454165804606-c3d57bc86b40' }, { t: 'Azubi-Austauschprogramme in Europa', img: '1523240795612-9a054b0db644' }, { t: 'Benefits, die Fachkr√§fte wirklich wollen', img: '1556761175-5973dc0f32e7' }, { t: 'Karrierewege nach der Ausbildung', img: '1486312338219-ce68d2c6f44d' }],
  'Technologie': [{ t: 'KI in der Heizungswartung: Predictive Maintenance', img: '1518770660439-4636190af475' }, { t: 'Drohnen f√ºr Dach- und Kamininspektionen', img: '1506947411449-b64ff92201ed' }, { t: '3D-Badplanung mit der VR-Brille erleben', img: '1592478411213-61532f94c038' }, { t: 'Der vernetzte Heizungskeller der Zukunft', img: '1558002038-1091a1661116' }, { t: 'Wasserstoff-Ready Kessel: Stand der Technik', img: '1532601224476-15c79f2f7a51' }, { t: 'Die besten Apps f√ºr das digitale Aufma√ü', img: '1551288049-bebda4e38f71' }, { t: 'Smarte Thermostate im gro√üen Vergleich', img: '1563770099-43e98d63375a' }, { t: 'Robotik bei der Rohrsanierung', img: '1485827404703-89b55fcc595e' }, { t: 'IoT-Sensoren zur Leckageortung', img: '1550751827-4bd374c3f58b' }, { t: 'Exoskelette f√ºr schwere Lasten auf dem Bau', img: '1581091226825-a6a2a5aee158' }, { t: 'Software f√ºr die effiziente Einsatzplanung', img: '1460925895917-afdab827c52f' }, { t: 'Cyber-Security f√ºr Smart Home Installationen', img: '1563986768609-322da13575f3' }],
  'Energie & Nachhaltigkeit': [{ t: 'W√§rmepumpen im Altbau: Was ist m√∂glich?', img: '1592833159057-65a2d0856048' }, { t: 'Solarthermie vs. Photovoltaik: Der Vergleich', img: '1509391366360-2e959784a276' }, { t: 'Grauwassernutzung im Einfamilienhaus', img: '1517478347898-1317d7b13998' }, { t: 'Holzpellets: Eine nachhaltige Alternative?', img: '1513828583688-601bf3925e2e' }, { t: 'Geothermie in der Rhein-Neckar Region', img: '1466611653243-cae5f2460d85' }, { t: 'Energieausweis richtig lesen und erstellen', img: '1450101499163-c8848c66ca85' }, { t: 'Hydraulischer Abgleich einfach erkl√§rt', img: '1621905251189-08b45d6a269e' }, { t: 'Wohnrauml√ºftung mit W√§rmer√ºckgewinnung', img: '1513262334863-1492b45e771c' }, { t: 'Gr√ºne Kredite f√ºr energetische Sanierungen', img: '1554224155-8d04cb21cd6c' }, { t: 'CO2-Bepreisung und ihre Folgen f√ºr Kunden', img: '1516937044662-5e3791418bfe' }, { t: 'Passivhaus-Standards 2025', img: '1500336236962-42173167a57a' }, { t: 'Recycling von alten Heizungsanlagen', img: '1532996126620-e918996f6428' }],
  'Regional': [{ t: 'Gro√üprojekt: Sanierung Mannheim Klinikum', img: '1504917595217-d4dc5ebe6122' }, { t: 'Herausforderung: Heidelberger Schloss', img: '1568632168969-92b425b04169' }, { t: 'Neubaugebiet Ludwigshafen S√ºd: Ein Bericht', img: '1597217329598-a620b784a440' }, { t: 'Interview mit der Handwerkskammer Mannheim', img: '1556761175-5973dc0f32e7' }, { t: 'Lokale F√∂rderprogramme Rhein-Neckar im Check', img: '1579621970568-a3aa04251b77' }, { t: 'Kooperation mit Stadtwerken Heidelberg', img: '1473341304177-f26f84052f40' }, { t: 'SHK-Innungsausflug in den Odenwald', img: '1501504905252-473c47e087f8' }, { t: 'Firmenjubil√§um Schmidt GmbH Weinheim', img: '1519389950476-295375a3c876' }, { t: 'Berufsschule Mannheim modernisiert Werkst√§tten', img: '1581094794329-cd136ce4dad9' }, { t: 'Hochwasserschutz am Neckar: Pumpen im Einsatz', img: '1583321500900-82807e458f3c' }, { t: 'Fernw√§rmeausbau in der Metropolregion', img: '1513828742343-522d4a9713c2' }, { t: 'Start-up Szene im Technologiepark Heidelberg', img: '1559136555-930d72f1d300' }]
};
const ALL_ARTICLES = [];
let idCounter = 1;
Object.entries(ARTICLE_DATA).forEach(([category, items]) => {
  items.forEach((item, index) => {
    ALL_ARTICLES.push({ id: `art-${idCounter++}`, type: 'article', title: item.t, summary: `Ein umfassender Bericht √ºber ${item.t.split(':')[0]}. Erfahren Sie, was dies f√ºr die Region Rhein-Neckar bedeutet.`, content: generateContent(item.t, item.t.split(':')[0], item.img), imageUrl: `https://images.unsplash.com/photo-${item.img}?auto=format&fit=crop&q=80&w=1200`, category: category, author: index % 3 === 0 ? 'Redaktion' : (index % 3 === 1 ? 'Markus Weber' : 'Julia Schmidt'), publishedAt: new Date(Date.now() - (index * 86400000) - (Math.random() * 1000000000)).toISOString(), featured: index === 0 && category === 'Branchen-News', views: Math.floor(Math.random() * 5000) + 500, shares: Math.floor(Math.random() * 300), readTime: Math.floor(Math.random() * 300) + 120, videoUrl: index === 3 ? 'https://www.youtube.com/watch?v=Fj0X1Wn6Eew' : undefined });
  });
});
ALL_ARTICLES.push(
  { id: 'page-imprint', type: 'page', title: 'Impressum', summary: 'Rechtliche Informationen', content: `<h2>Impressum</h2><p><strong>Angaben gem√§√ü ¬ß 5 TMG</strong></p><p>SHK Rhein-Neckar Magazin GmbH<br>Wasserturmstra√üe 12<br>68161 Mannheim<br>Deutschland</p><p><strong>Vertreten durch:</strong><br>Max Mustermann</p><p><strong>Kontakt:</strong><br>Telefon: +49 (0) 621 12345-0<br>E-Mail: kontakt@shk-rhein-neckar.de</p>`, imageUrl: 'https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-privacy', type: 'page', title: 'Datenschutzerkl√§rung', summary: 'Datenschutz', content: '<h2>Datenschutz</h2><p>Wir nehmen den Schutz Ihrer Daten ernst...</p>', imageUrl: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-terms', type: 'page', title: 'AGB', summary: 'Allgemeine Gesch√§ftsbedingungen', content: '<h2>AGB</h2><p>Allgemeine Gesch√§ftsbedingungen f√ºr die Nutzung...</p>', imageUrl: 'https://images.unsplash.com/photo-1450101499163-c8848c66ca85?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-submit', type: 'page', title: 'Story einreichen', summary: 'Senden Sie uns Ihre Story', content: `<h2>Ihre Geschichte im Magazin</h2><p>Senden Sie uns Ihre Projektberichte an <a href="mailto:redaktion@shk-rhein-neckar.de">redaktion@shk-rhein-neckar.de</a></p>`, imageUrl: 'https://images.unsplash.com/photo-1512486130939-2c4f79935e4f?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'Redaktion', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-advertising', type: 'page', title: 'Werben & Partner', summary: 'Werbem√∂glichkeiten', content: `<h2>Media-Daten</h2><p>Erreichen Sie 5000+ Fachkr√§fte. Kontakt: <a href="mailto:ads@shk-rhein-neckar.de">ads@shk-rhein-neckar.de</a></p>`, imageUrl: 'https://images.unsplash.com/photo-1557804506-669a67965ba0?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'Sales', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-jobs', type: 'page', title: 'Stellenmarkt', summary: 'Jobs in der Region', content: `<h2>SHK Jobs Rhein-Neckar</h2><p>Inserieren Sie hier. Kontakt: <a href="mailto:jobs@shk-rhein-neckar.de">jobs@shk-rhein-neckar.de</a></p>`, imageUrl: 'https://images.unsplash.com/photo-1521791136064-7986c2920216?auto=format&fit=crop&q=80&w=1200', category: 'Page', author: 'HR', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 }
);

// --- 2. LANGUAGE MANAGER ---
const translations = {
  en: { 'nav.home': 'Home', 'nav.directory': 'Directory', 'hero.title': 'The Leading SHK Industry Magazine.', 'hero.subtitle': 'Trusted industry coverage, insights, and success stories for sanitary, heating, and climate professionals in the Rhein-Neckar region.', 'hero.read_latest': 'Read Latest', 'hero.submit_story': 'Submit a Story', 'section.top_story': 'Top Story', 'section.latest_news': 'Latest Industry News', 'section.trust_title': 'Deeply Rooted in Rhein-Neckar', 'section.trust_text': 'We don\'t just report on the industry; we are part of the local ecosystem. Connecting businesses in Mannheim, Heidelberg, Ludwigshafen, and beyond.', 'section.explore_categories': 'Explore Topics', 'newsletter.title': 'Stay Informed. No Spam.', 'newsletter.text': 'Get the weekly digest of the most important SHK news in Rhein-Neckar. Used by over 2,000 local professionals.', 'newsletter.placeholder': 'Your work email...', 'newsletter.button': 'Subscribe', 'footer.about': 'The independent voice for the Sanitary, Heating, and Climate industry in the metropolitan region.', 'article.read_story': 'Read Story', 'article.watch_video': 'Watch Video', 'search.placeholder': 'Search articles...', 'search.no_results': 'No articles found matching your search.', 'btn.show_more': 'Show More', 'btn.load_more': 'Load More Articles', 'btn.view_category': 'View Category', 'nav.get_featured': 'Get Featured', 'cat.Branchen-News': 'Industry News', 'cat.Betriebs-Features': 'Company Features', 'cat.Personal & Karriere': 'HR & Careers', 'cat.Technologie': 'Technology', 'cat.Energie & Nachhaltigkeit': 'Energy & Sustainability', 'cat.Regional': 'Regional' },
  de: { 'nav.home': 'Startseite', 'nav.directory': 'Verzeichnis', 'hero.title': 'Das f√ºhrende SHK-Branchenmagazin.', 'hero.subtitle': 'Verl√§ssliche Berichterstattung, Einblicke und Erfolgsgeschichten f√ºr Sanit√§r-, Heizungs- und Klimaprofis in der Metropolregion Rhein-Neckar.', 'hero.read_latest': 'Aktuelles lesen', 'hero.submit_story': 'Story einreichen', 'section.top_story': 'Top Story', 'section.latest_news': 'Neueste Branchennachrichten', 'section.trust_title': 'Tief verwurzelt in Rhein-Neckar', 'section.trust_text': 'Wir berichten nicht nur √ºber die Branche; wir sind Teil des lokalen √ñkosystems. Wir verbinden Unternehmen in Mannheim, Heidelberg, Ludwigshafen und dar√ºber hinaus.', 'section.explore_categories': 'Themen Entdecken', 'newsletter.title': 'Informiert bleiben. Kein Spam.', 'newsletter.text': 'Erhalten Sie die w√∂chentliche Zusammenfassung der wichtigsten SHK-Nachrichten. Gelesen von √ºber 2.000 lokalen Profis.', 'newsletter.placeholder': 'Ihre gesch√§ftliche E-Mail...', 'newsletter.button': 'Abonnieren', 'footer.about': 'Die unabh√§ngige Stimme f√ºr die Sanit√§r-, Heizungs- und Klimabranche in der Metropolregion.', 'article.read_story': 'Artikel lesen', 'article.watch_video': 'Video ansehen', 'search.placeholder': 'Artikel suchen...', 'search.no_results': 'Keine Artikel gefunden.', 'btn.show_more': 'Mehr Anzeigen', 'btn.load_more': 'Weitere Artikel laden', 'btn.view_category': 'Kategorie ansehen', 'nav.get_featured': 'Artikel Einreichen', 'cat.Branchen-News': 'Branchen-News', 'cat.Betriebs-Features': 'Betriebs-Features', 'cat.Personal & Karriere': 'Personal & Karriere', 'cat.Technologie': 'Technologie', 'cat.Energie & Nachhaltigkeit': 'Energie & Nachhaltigkeit', 'cat.Regional': 'Regional' }
};
const languageManager = {
    currentLanguage: 'de',
    getLanguage: () => {
        const lang = localStorage.getItem('shk_lang') || 'de';
        languageManager.currentLanguage = lang;
        return lang;
    },
    setLanguage: (lang) => {
        languageManager.currentLanguage = lang;
        localStorage.setItem('shk_lang', lang);
        renderPage(); // Re-render the whole page on language change
    },
    t: (key) => {
        return translations[languageManager.currentLanguage]?.[key] || translations['de'][key] || key;
    }
};

// --- 3. COMPONENT TEMPLATES ---
const createHeaderHTML = (categories, activeCategory) => {
    const t = languageManager.t;
    return `
    <nav class="sticky top-0 z-50 transition-all duration-300 bg-white/95 backdrop-blur-md shadow-md border-b border-gray-200 py-0">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-20 items-center">
          <div class="flex items-center lg:hidden">
            <button id="mobile-menu-btn" class="p-2 text-brand-dark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg></button>
          </div>
          <div class="flex-shrink-0 flex items-center justify-center lg:justify-start w-full lg:w-auto cursor-pointer" onclick="window.location.href='index.html'">
            <img src="shklogo.jpg" alt="SHK Rhein-Neckar" class="w-auto object-contain h-12"/>
          </div>
          <div class="hidden lg:flex space-x-8 items-center h-full">
              <a href="index.html" data-category="All" class="nav-category-link relative h-full text-xs font-bold uppercase tracking-widest transition-colors flex items-center ${activeCategory === 'All' ? 'text-brand-copper' : 'text-brand-steel hover:text-brand-dark'}">
                ${t('nav.home')}
                ${activeCategory === 'All' ? '<span class="absolute bottom-0 left-0 w-full h-0.5 bg-brand-copper"></span>' : ''}
              </a>
              <a href="directory.html" class="relative h-full text-xs font-bold uppercase tracking-widest transition-colors flex items-center text-brand-steel hover:text-brand-dark">${t('nav.directory')}</a>
              ${categories.slice(0, 4).map(cat => `
                <a href="index.html?category=${encodeURIComponent(cat)}" data-category="${cat}" class="nav-category-link relative h-full text-xs font-bold uppercase tracking-widest transition-colors flex items-center ${activeCategory === cat ? 'text-brand-copper' : 'text-brand-steel hover:text-brand-dark'}">
                  ${t(`cat.${cat}`)}
                  ${activeCategory === cat ? '<span class="absolute bottom-0 left-0 w-full h-0.5 bg-brand-copper"></span>' : ''}
                </a>
              `).join('')}
          </div>
          <div class="flex items-center space-x-4">
            <div id="search-container" class="flex items-center transition-all duration-300 w-8">
              <button id="search-toggle-btn" class="p-2 text-brand-steel hover:text-brand-copper transition-colors">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></svg>
              </button>
            </div>
            <div class="hidden lg:block relative group">
              <button id="lang-menu-btn" class="flex items-center space-x-2 text-xs font-bold uppercase text-brand-steel hover:text-brand-dark transition-colors">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20z"/><path d="M2 12h20"/></svg>
                  <span>${languageManager.currentLanguage.toUpperCase()}</span>
              </button>
              <div id="lang-menu" class="absolute hidden right-0 mt-4 w-40 bg-white border border-gray-100 shadow-xl rounded-sm py-2 z-50">
                <div class="absolute -top-2 right-4 w-4 h-4 bg-white border-t border-l border-gray-100 transform rotate-45"></div>
                ${['de', 'en'].map(lang => `<button data-lang="${lang}" class="lang-option-btn w-full text-left px-4 py-3 text-xs font-bold flex items-center hover:bg-gray-50 transition-colors ${languageManager.currentLanguage === lang ? 'text-brand-copper bg-orange-50/50' : 'text-gray-700'}">${lang === 'de' ? 'üá©üá™' : 'üá¨üáß'} ${lang === 'de' ? 'Deutsch' : 'English'}</button>`).join('')}
              </div>
            </div>
            <a href="article.html?id=page-submit" class="hidden lg:block group relative bg-brand-dark text-white px-6 py-3 text-xs font-bold uppercase tracking-wider overflow-hidden rounded-sm transition-all hover:shadow-lg">
              <span class="relative z-10 group-hover:text-brand-copper transition-colors">${t('nav.get_featured')}</span>
              <div class="absolute inset-0 bg-white transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300 ease-out z-0"></div>
            </a>
          </div>
        </div>
      </div>
      <div id="mobile-menu" class="hidden lg:hidden border-t border-gray-100 bg-white absolute w-full z-50 shadow-2xl"></div>
    </nav>
    `;
};
const createFooterHTML = (categories) => {
    const t = languageManager.t;
    return `
    <footer class="bg-white border-t border-gray-200 pt-16 pb-8">
      <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 gap-12">
        <div class="col-span-1 md:col-span-4 lg:col-span-2">
          <img src="shklogo.jpg" alt="SHK Rhein-Neckar" class="h-16 w-auto mb-4"/>
          <p class="text-sm text-brand-steel leading-relaxed max-w-sm">${t('footer.about')}</p>
        </div>
        <div class="lg:col-start-3">
          <h3 class="text-xs font-bold uppercase tracking-widest text-brand-dark mb-6">Magazin</h3>
          <ul class="space-y-3 text-sm text-brand-steel">
            <li><a href="index.html" class="hover:text-brand-copper transition">${t('nav.home')}</a></li>
            <li><a href="directory.html" class="hover:text-brand-copper transition">${t('nav.directory')}</a></li>
            ${categories.slice(0, 4).map(c => `<li><a href="index.html?category=${encodeURIComponent(c)}" class="hover:text-brand-copper transition">${t(`cat.${c}`)}</a></li>`).join('')}
          </ul>
        </div>
        <div>
          <h3 class="text-xs font-bold uppercase tracking-widest text-brand-dark mb-6">Unternehmen</h3>
          <ul class="space-y-3 text-sm text-brand-steel">
            <li><a href="article.html?id=page-submit" class="hover:text-brand-copper transition">${t('hero.submit_story')}</a></li>
            <li><a href="article.html?id=page-advertising" class="hover:text-brand-copper transition">Advertising</a></li>
            <li><a href="article.html?id=page-jobs" class="hover:text-brand-copper transition">Job Board</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-xs font-bold uppercase tracking-widest text-brand-dark mb-6">Kontakt</h3>
          <ul class="space-y-3 text-sm text-brand-steel">
            <li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 mt-1 flex-shrink-0"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg> redaktion@shk-rhein-neckar.de</li>
            <li class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 mt-1 flex-shrink-0"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg> Mannheim, Germany</li>
          </ul>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4 mt-16 pt-8 border-t border-gray-100 flex flex-col md:flex-row justify-between items-center text-xs text-gray-400">
        <div class="flex space-x-6">
          <a href="article.html?id=page-imprint" class="hover:text-brand-copper">Impressum</a>
          <a href="article.html?id=page-privacy" class="hover:text-brand-copper">Datenschutz</a>
          <a href="article.html?id=page-terms" class="hover:text-brand-copper">AGB</a>
        </div>
        <div class="mt-4 md:mt-0 text-center md:text-right">
          <span>¬© 2025 SHK Rhein-Neckar. Alle Rechte vorbehalten.</span>
          <a href="admin.html" class="ml-4 text-gray-300 hover:text-brand-copper transition">Mitarbeiter Login</a>
        </div>
      </div>
    </footer>
    `;
};
const createArticleCardHTML = (article, variant = 'standard') => {
    const t = languageManager.t;
    const title = article.translations?.[languageManager.currentLanguage]?.title || article.title;
    const summary = article.translations?.[languageManager.currentLanguage]?.summary || article.summary;

    if (variant === 'featured') {
        return `
        <a href="article.html?id=${article.id}" class="group relative block w-full h-[600px] overflow-hidden rounded-sm shadow-2xl cursor-pointer">
            <img src="${article.imageUrl}" alt="${title}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"/>
            <div class="absolute inset-0 bg-gradient-to-t from-brand-dark via-brand-dark/70 to-transparent opacity-90 transition-opacity duration-500 group-hover:opacity-100"></div>
            ${article.videoUrl ? '<div class="absolute top-6 right-6 bg-white/10 backdrop-blur-md border border-white/20 text-white p-4 rounded-full animate-pulse shadow-lg z-10 group-hover:scale-110 transition-transform"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg></div>' : ''}
            <div class="absolute bottom-0 left-0 p-8 md:p-12 text-white max-w-5xl z-20">
                <div class="overflow-hidden mb-6"><span class="inline-block uppercase tracking-[0.2em] text-[10px] font-bold bg-brand-copper text-white px-3 py-1.5 rounded-sm transform translate-y-0 transition-transform group-hover:-translate-y-1">${article.category}</span></div>
                <h2 class="text-3xl md:text-5xl lg:text-6xl font-display font-black mb-6 leading-none tracking-tight group-hover:text-gray-100 transition-colors">${title}</h2>
                <p class="text-gray-300 mb-8 line-clamp-2 max-w-2xl font-light text-lg md:text-xl leading-relaxed opacity-90 group-hover:opacity-100 transition-opacity">${summary}</p>
                <div class="flex items-center space-x-6 text-xs font-bold text-gray-400 uppercase tracking-widest border-t border-white/10 pt-6">
                    <span class="text-brand-copper">${article.author}</span>
                    <span class="w-1 h-1 bg-gray-600 rounded-full"></span>
                    <span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 mr-2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> ${new Date(article.publishedAt).toLocaleDateString()}</span>
                </div>
            </div>
        </a>`;
    }
    return `
    <a href="article.html?id=${article.id}" class="flex flex-col group cursor-pointer h-full bg-white rounded-sm overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border border-transparent hover:border-gray-100">
      <div class="overflow-hidden aspect-[16/10] relative">
        <img src="${article.imageUrl}" alt="${title}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
        <div class="absolute top-4 left-4"><span class="bg-white/90 backdrop-blur-sm text-brand-dark text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 shadow-sm rounded-sm">${article.category}</span></div>
        <div class="absolute inset-0 bg-brand-dark/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        ${article.videoUrl ? '<div class="absolute inset-0 flex items-center justify-center pointer-events-none"><div class="bg-brand-copper/90 p-3 rounded-full shadow-lg transform scale-90 opacity-0 group-hover:opacity-100 group-hover:scale-100 transition-all duration-300 delay-75"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-white"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg></div></div>' : ''}
      </div>
      <div class="flex flex-col flex-grow p-6 relative">
        <div class="mb-4 flex items-center text-[10px] font-bold text-gray-400 uppercase tracking-wider space-x-2">
           <span>${new Date(article.publishedAt).toLocaleDateString()}</span>
           <span class="w-px h-3 bg-gray-300"></span>
           <span class="text-brand-copper">${article.readTime ? Math.ceil(article.readTime / 60) : 5} min read</span>
        </div>
        <h3 class="text-xl font-display font-bold text-brand-dark mb-3 leading-snug group-hover:text-brand-copper transition-colors">${title}</h3>
        <p class="text-brand-steel text-sm line-clamp-3 mb-6 flex-grow leading-relaxed">${summary}</p>
        <div class="mt-auto pt-4 border-t border-gray-50 flex items-center text-xs font-bold uppercase tracking-wider text-brand-dark group-hover:text-brand-copper transition-colors">
           ${article.videoUrl ? t('article.watch_video') : t('article.read_story')} 
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 ml-1 transform group-hover:translate-x-1 transition-transform"><polyline points="9 18 15 12 9 6"/></svg>
        </div>
      </div>
    </a>`;
};


// --- 4. PAGE-SPECIFIC LOGIC ---
const appState = {
    activeCategory: 'All',
    searchQuery: '',
    displayedCount: 6
};

function renderMainContent() {
    const t = languageManager.t;
    const mainContent = document.getElementById('main-content');
    
    let displayArticles = ALL_ARTICLES.filter(a => a.type !== 'page');

    if (appState.searchQuery) {
        const lowerQuery = appState.searchQuery.toLowerCase();
        displayArticles = displayArticles.filter(a => 
            a.title.toLowerCase().includes(lowerQuery) || 
            a.summary.toLowerCase().includes(lowerQuery) ||
            a.content.toLowerCase().includes(lowerQuery)
        );
    } else if (appState.activeCategory !== 'All') {
        displayArticles = displayArticles.filter(a => a.category === appState.activeCategory);
    }

    const featuredArticle = !appState.searchQuery && appState.activeCategory === 'All' ? displayArticles.find(a => a.featured) : null;
    let gridArticles = displayArticles;
    if (featuredArticle) {
        gridArticles = gridArticles.filter(a => a.id !== featuredArticle.id);
    }

    const categoryCards = INITIAL_CATEGORIES.map(cat => {
        const catArticle = ALL_ARTICLES.find(a => a.category === cat && a.imageUrl);
        const bgImage = catArticle?.imageUrl || 'https://images.unsplash.com/photo-1504328345606-18bbc8c9d7d1?auto=format&fit=crop&q=80&w=600';
        return { id: cat, title: t(`cat.${cat}`), image: bgImage, count: ALL_ARTICLES.filter(a => a.category === cat).length };
    });

    let contentHTML = '';

    // Hero Section
    if (appState.activeCategory === 'All' && !appState.searchQuery) {
        contentHTML += `
        <div class="relative w-full h-[650px] flex items-center bg-brand-dark overflow-hidden group">
            <div class="absolute inset-0 z-0">
               <img src="https://images.unsplash.com/photo-1581092334651-ddf26d9a09d0?auto=format&fit=crop&q=80&w=2000" class="w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-[20s] ease-linear" alt="Industrial Background" />
               <div class="absolute inset-0 bg-gradient-to-r from-brand-dark via-brand-dark/90 to-transparent"></div>
            </div>
            <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
              <div class="max-w-3xl space-y-8 animate-fade-in-up">
                 <h1 class="text-5xl md:text-7xl lg:text-8xl font-display font-black text-white leading-[0.9] tracking-tighter">${t('hero.title')}</h1>
                 <p class="text-xl md:text-2xl text-gray-300 font-light leading-relaxed max-w-xl border-l-4 border-white/10 pl-6">${t('hero.subtitle')}</p>
                 <div class="flex flex-wrap gap-4 pt-8">
                    <button onclick="window.scrollTo({ top: 800, behavior: 'smooth'})" class="bg-brand-copper text-white px-10 py-4 text-xs font-bold uppercase tracking-widest hover:bg-white hover:text-brand-dark transition-all duration-300 rounded-sm shadow-xl hover:shadow-2xl hover:-translate-y-1">${t('hero.read_latest')}</button>
                    <a href="article.html?id=page-submit" class="group px-10 py-4 text-xs font-bold uppercase tracking-widest text-white border border-white/30 hover:bg-white/10 transition-all duration-300 rounded-sm backdrop-blur-sm flex items-center">${t('hero.submit_story')}</a>
                 </div>
              </div>
            </div>
        </div>
        `;
    }

    contentHTML += `<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">`;
    
    // Search Results
    if (appState.searchQuery) {
      contentHTML += `<div class="mb-12"><h2 class="text-3xl font-display font-bold text-brand-dark mb-4">Search Results: "${appState.searchQuery}"</h2><p class="text-brand-steel">${displayArticles.length} articles found.</p></div>`;
    }

    // Featured Article
    if (featuredArticle) {
      contentHTML += `<section class="mb-24 animate-fade-in-up"><div class="flex items-center space-x-6 mb-10"><div class="h-px bg-gray-200 flex-grow"></div><span class="text-brand-steel uppercase tracking-[0.2em] text-xs font-bold">${t('section.top_story')}</span><div class="h-px bg-gray-200 flex-grow"></div></div>${createArticleCardHTML(featuredArticle, 'featured')}</section>`;
    }

    // Article Grid
    contentHTML += `
    <section class="animate-fade-in-up">
        <div class="flex items-end justify-between mb-12 border-b border-gray-200 pb-6">
            <h2 class="text-3xl font-display font-bold text-brand-dark">${appState.activeCategory === 'All' ? t('section.latest_news') : (t(`cat.${appState.activeCategory}`) || appState.activeCategory)}</h2>
            <span class="text-xs font-bold text-gray-400 uppercase tracking-widest hidden sm:block">${gridArticles.length} Stories</span>
        </div>
        <div id="article-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16">
            ${gridArticles.slice(0, appState.displayedCount).map((article, idx) => `<div key="${article.id}" style="animation-delay: ${0.1 * idx}s" class="animate-fade-in-up">${createArticleCardHTML(article)}</div>`).join('')}
        </div>
        ${gridArticles.length === 0 ? `<div class="text-center py-32 bg-gray-50 rounded-sm border border-dashed border-gray-300"><p class="text-brand-steel font-medium text-lg">${appState.searchQuery ? t('search.no_results') : 'No stories found.'}</p></div>` : ''}
        ${gridArticles.length > appState.displayedCount ? `<div class="mt-16 text-center"><button id="load-more-btn" class="inline-flex items-center bg-white border border-gray-200 px-8 py-3 text-xs font-bold uppercase tracking-widest text-brand-dark hover:border-brand-copper hover:text-brand-copper transition-colors shadow-sm">${appState.activeCategory === 'All' ? t('btn.show_more') : t('btn.load_more')}</button></div>` : ''}
    </section>`;

    // Category Cards
    if (appState.activeCategory === 'All' && !appState.searchQuery) {
        contentHTML += `
        <section class="mt-32 pt-16 border-t border-gray-100 animate-fade-in">
            <h2 class="text-2xl font-display font-bold text-brand-dark flex items-center mb-10">${t('section.explore_categories')}</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                ${categoryCards.map(cat => `
                    <a href="index.html?category=${encodeURIComponent(cat.id)}" data-category="${cat.id}" class="nav-category-link group relative h-64 rounded-sm overflow-hidden cursor-pointer shadow-lg hover:shadow-2xl transition-all duration-500">
                        <img src="${cat.image}" alt="${cat.title}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
                        <div class="absolute inset-0 bg-brand-dark/60 group-hover:bg-brand-dark/40 transition-colors duration-500"></div>
                        <div class="absolute inset-0 p-8 flex flex-col justify-end items-start">
                            <span class="text-xs text-white/80 font-bold uppercase tracking-wider mb-2">${cat.count} Stories</span>
                            <h3 class="text-2xl font-display font-bold text-white mb-4 group-hover:translate-x-2 transition-transform">${cat.title}</h3>
                        </div>
                    </a>`).join('')}
            </div>
        </section>`;
    }

    contentHTML += `</div>`; // Close main container

    // Regional Trust Block
    if (appState.activeCategory === 'All' && !appState.searchQuery) {
        contentHTML += `
        <section class="bg-white py-24 border-y border-gray-100">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <h2 class="text-3xl font-display font-bold text-brand-dark mb-6">${t('section.trust_title')}</h2>
                <p class="text-brand-steel text-lg max-w-2xl mx-auto mb-16 leading-relaxed">${t('section.trust_text')}</p>
            </div>
        </section>`;
    }
    
    // Newsletter
    contentHTML += `
    <section class="py-24 px-4 bg-brand-surface">
        <div class="max-w-6xl mx-auto bg-brand-dark rounded-sm overflow-hidden shadow-2xl relative">
            <div class="relative z-10 grid md:grid-cols-2 gap-12 p-12 md:p-20 items-center">
                <div class="text-left space-y-6">
                   <h2 class="text-4xl font-display font-bold text-white leading-tight">${t('newsletter.title')}</h2>
                   <p class="text-gray-400 text-lg leading-relaxed">${t('newsletter.text')}</p>
                </div>
                <div class="bg-white/5 backdrop-blur-sm p-8 rounded-sm border border-white/10">
                   <form class="flex flex-col gap-4" onsubmit="event.preventDefault();">
                     <input type="email" placeholder="${t('newsletter.placeholder')}" class="w-full px-6 py-4 bg-white/10 border border-white/10 rounded-sm text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-copper focus:bg-white/20 transition-all"/>
                     <button class="w-full bg-brand-copper text-white px-6 py-4 font-bold uppercase tracking-widest text-xs hover:bg-white hover:text-brand-dark transition-all rounded-sm shadow-lg hover:shadow-xl mt-2">${t('newsletter.button')}</button>
                   </form>
                </div>
            </div>
        </div>
    </section>`;
    
    mainContent.innerHTML = contentHTML;
    attachPageEventListeners();
}

function attachPageEventListeners() {
    // Load more button
    const loadMoreBtn = document.getElementById('load-more-btn');
    if (loadMoreBtn) {
        loadMoreBtn.addEventListener('click', () => {
            appState.displayedCount += appState.activeCategory === 'All' ? 6 : 9;
            renderMainContent();
        });
    }

    // Category links in content
    document.querySelectorAll('.nav-category-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const category = link.getAttribute('data-category');
            appState.activeCategory = category;
            appState.searchQuery = '';
            appState.displayedCount = category === 'All' ? 6 : 9;
            window.history.pushState({category}, '', `index.html?category=${encodeURIComponent(category)}`);
            renderPage();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });
}


function renderPage() {
    languageManager.getLanguage();
    document.getElementById('header-container').innerHTML = createHeaderHTML(INITIAL_CATEGORIES, appState.activeCategory);
    document.getElementById('footer-container').innerHTML = createFooterHTML(INITIAL_CATEGORIES);
    renderMainContent();
    attachGlobalEventListeners();
}

function attachGlobalEventListeners() {
    // Language buttons
    document.querySelectorAll('.lang-option-btn').forEach(btn => {
        btn.addEventListener('click', () => languageManager.setLanguage(btn.getAttribute('data-lang')));
    });
    document.getElementById('lang-menu-btn')?.addEventListener('click', () => {
        document.getElementById('lang-menu').classList.toggle('hidden');
    });

    // Mobile Menu
    document.getElementById('mobile-menu-btn')?.addEventListener('click', () => {
        const menu = document.getElementById('mobile-menu');
        if (menu.innerHTML === '') {
            menu.innerHTML = `
            <div class="px-6 py-6 space-y-4">
                <a href="index.html" class="block w-full text-left py-3 text-sm font-bold uppercase tracking-wide text-brand-dark hover:text-brand-copper">Home</a>
                <a href="directory.html" class="block w-full text-left py-3 text-sm font-bold uppercase tracking-wide text-brand-dark hover:text-brand-copper">Directory</a>
                ${INITIAL_CATEGORIES.map(cat => `<a href="index.html?category=${encodeURIComponent(cat)}" class="block w-full text-left py-3 text-sm font-bold uppercase tracking-wide text-brand-dark hover:text-brand-copper">${languageManager.t(`cat.${cat}`)}</a>`).join('')}
            </div>
            `;
        }
        menu.classList.toggle('hidden');
    });

    // Search
    const searchContainer = document.getElementById('search-container');
    const searchToggleBtn = document.getElementById('search-toggle-btn');
    searchToggleBtn.addEventListener('click', () => {
        searchContainer.classList.remove('w-8');
        searchContainer.classList.add('w-full', 'md:w-96');
        searchContainer.innerHTML = `
        <form id="search-form" class="relative w-full flex items-center">
            <input type="text" id="search-input" placeholder="${languageManager.t('search.placeholder')}" class="w-full bg-gray-100 border-none rounded-sm px-4 py-2 pr-10 text-sm focus:ring-2 focus:ring-brand-copper outline-none" />
            <button type="button" id="search-close-btn" class="absolute right-2 p-1 text-gray-400 hover:text-brand-dark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></svg></button>
        </form>`;
        document.getElementById('search-input').focus();

        document.getElementById('search-form').addEventListener('submit', (e) => {
            e.preventDefault();
            appState.searchQuery = document.getElementById('search-input').value;
            appState.displayedCount = 100;
            renderPage();
        });

        document.getElementById('search-close-btn').addEventListener('click', () => {
            appState.searchQuery = '';
            renderPage(); // This will also reset the search bar
        });
    });
}

// Initial Load
document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category');
    if (category) {
        appState.activeCategory = category;
        appState.displayedCount = 9;
    }
    renderPage();
});

</script>
</body>
</html>
