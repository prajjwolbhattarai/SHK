<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SHK Rhein-Neckar | Branchenmagazin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      .writing-mode-vertical { writing-mode: vertical-rl; }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Montserrat', 'sans-serif'],
            },
            colors: {
              'brand-dark': '#0f172a',
              'brand-copper': '#b45309',
              'brand-steel': '#475569',
              'brand-surface': '#f8fafc',
            }
          }
        }
      }
    </script>
</head>
<body class="bg-white text-slate-900 antialiased selection:bg-brand-copper selection:text-white">

    <div class="fixed top-0 left-0 w-full h-1 z-[60] bg-transparent">
        <div id="progress-bar" class="h-full bg-brand-copper transition-all duration-100 ease-out shadow-[0_0_10px_#b45309]" style="width: 0%"></div>
    </div>

    <div id="header-container"></div>

    <main id="main-content">
        <!-- Article content is rendered by JavaScript -->
    </main>
    
    <div id="footer-container"></div>

<script>
// V A N I L L A   J S   A P P L I C A T I O N (Article Page)

// --- 1. DATA STORE (Copied from index.html) ---
const INITIAL_CATEGORIES = ['Branchen-News', 'Betriebs-Features', 'Personal & Karriere', 'Technologie', 'Energie & Nachhaltigkeit', 'Regional'];
const generateContent = (title, topic, imageKeyword) => `<p class="lead">In der heutigen Ausgabe von SHK Rhein-Neckar widmen wir uns dem Thema <strong>${topic}</strong>. Ein Bereich, der für Fachhandwerker in der Region immer wichtiger wird.</p><h2>Warum ${topic} jetzt relevant ist</h2><p>Die Branche befindet sich im Wandel. Experten sind sich einig: Wer jetzt nicht handelt, verliert den Anschluss. In Mannheim und Heidelberg sehen wir bereits, wie führende Betriebe diese Entwicklung für sich nutzen.</p>`;
const ARTICLE_DATA = {
  'Branchen-News': [{ t: 'Neue Energieverordnungen 2025: Was gilt ab Januar?', img: '1497366216548-37526070297c' }, { t: 'Rückblick ISH Messe Frankfurt: Die Highlights', img: '1542744173-8e7e53415bb0' }],
  'Betriebs-Features': [{ t: 'Wie Müller & Söhne komplett papierlos wurden', img: '1516321318423-f06f85e504b3' }], 'Personal & Karriere': [{ t: 'Azubi-Recruiting auf TikTok: Ein Leitfaden', img: '1611162616305-c69b3fa7fbe0' }], 'Technologie': [{ t: 'KI in der Heizungswartung: Predictive Maintenance', img: '1518770660439-4636190af475' }], 'Energie & Nachhaltigkeit': [{ t: 'Wärmepumpen im Altbau: Was ist möglich?', img: '1592833159057-65a2d0856048' }], 'Regional': [{ t: 'Großprojekt: Sanierung Mannheim Klinikum', img: '1504917595217-d4dc5ebe6122' }]
};
const ALL_ARTICLES = [];
let idCounter = 1;
Object.entries(ARTICLE_DATA).forEach(([category, items]) => {
  items.forEach((item, index) => { ALL_ARTICLES.push({ id: `art-${idCounter++}`, type: 'article', title: item.t, summary: `Ein umfassender Bericht über ${item.t.split(':')[0]}.`, content: generateContent(item.t, item.t.split(':')[0], item.img), imageUrl: `https://images.unsplash.com/photo-${item.img}?auto=format&fit=crop&q=80&w=1200`, category: category, author: 'Redaktion', publishedAt: new Date().toISOString(), featured: false, views: 1000, shares: 50, readTime: 180 }); });
});
ALL_ARTICLES.push(
  { id: 'page-imprint', type: 'page', title: 'Impressum', summary: 'Rechtliche Informationen', content: `<h2>Impressum</h2><p><strong>Angaben gemäß § 5 TMG</strong></p><p>SHK Rhein-Neckar Magazin GmbH<br>Wasserturmstraße 12<br>68161 Mannheim<br>Deutschland</p>`, imageUrl: '', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-privacy', type: 'page', title: 'Datenschutzerklärung', summary: 'Datenschutz', content: '<h2>Datenschutz</h2><p>Wir nehmen den Schutz Ihrer Daten ernst...</p>', imageUrl: '', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-terms', type: 'page', title: 'AGB', summary: 'AGB', content: '<h2>AGB</h2><p>Unsere AGBs...</p>', imageUrl: '', category: 'Page', author: 'Admin', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-submit', type: 'page', title: 'Story einreichen', summary: 'Senden Sie uns Ihre Story', content: `<h2>Ihre Geschichte im Magazin</h2><p>Senden Sie uns Ihre Projektberichte an <a href="mailto:redaktion@shk-rhein-neckar.de">redaktion@shk-rhein-neckar.de</a></p>`, imageUrl: '', category: 'Page', author: 'Redaktion', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-advertising', type: 'page', title: 'Werben & Partner', summary: 'Werbemöglichkeiten', content: `<h2>Media-Daten</h2><p>Kontakt: <a href="mailto:ads@shk-rhein-neckar.de">ads@shk-rhein-neckar.de</a></p>`, imageUrl: '', category: 'Page', author: 'Sales', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 },
  { id: 'page-jobs', type: 'page', title: 'Stellenmarkt', summary: 'Jobs in der Region', content: `<h2>SHK Jobs Rhein-Neckar</h2><p>Inserieren Sie hier. Kontakt: <a href="mailto:jobs@shk-rhein-neckar.de">jobs@shk-rhein-neckar.de</a></p>`, imageUrl: '', category: 'Page', author: 'HR', publishedAt: new Date().toISOString(), featured: false, views: 0, shares: 0, readTime: 0 }
);


// --- 2. LANGUAGE MANAGER ---
const translations = { de: { 'article.read_time': 'Min Lesezeit', 'article.share': 'Teilen' }, en: { 'article.read_time': 'min read', 'article.share': 'Share' } };
const languageManager = {
    currentLanguage: 'de',
    getLanguage: () => {
        const lang = localStorage.getItem('shk_lang') || 'de';
        languageManager.currentLanguage = lang;
        return lang;
    },
    setLanguage: (lang) => {
        languageManager.currentLanguage = lang;
        localStorage.setItem('shk_lang', lang);
        renderPage();
    },
    t: (key) => translations[languageManager.currentLanguage]?.[key] || key
};

// --- 3. COMPONENT TEMPLATES ---
const createHeaderHTML = (categories) => `
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md border-b border-gray-200 py-0">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-20 items-center">
            <a href="index.html" class="flex-shrink-0 flex items-center cursor-pointer">
                <img src="shklogo.jpg" alt="SHK Rhein-Neckar" class="w-auto object-contain h-12"/>
            </a>
            <div class="hidden lg:flex space-x-8 items-center h-full">
                <a href="index.html" class="text-xs font-bold uppercase tracking-widest text-brand-steel hover:text-brand-dark">Home</a>
                <a href="directory.html" class="text-xs font-bold uppercase tracking-widest text-brand-steel hover:text-brand-dark">Verzeichnis</a>
                ${categories.slice(0, 4).map(cat => `<a href="index.html?category=${encodeURIComponent(cat)}" class="text-xs font-bold uppercase tracking-widest text-brand-steel hover:text-brand-dark">${cat}</a>`).join('')}
            </div>
            <a href="article.html?id=page-submit" class="hidden lg:block bg-brand-dark text-white px-6 py-3 text-xs font-bold uppercase tracking-wider rounded-sm">Artikel Einreichen</a>
        </div>
      </div>
    </nav>`;
const createFooterHTML = (categories) => `
    <footer class="bg-white border-t border-gray-200 pt-16 pb-8">
      <div class="max-w-7xl mx-auto px-4 text-center">
        <p>© 2025 SHK Rhein-Neckar. Alle Rechte vorbehalten.</p>
        <a href="admin.html" class="text-xs text-gray-400 hover:text-brand-copper">Mitarbeiter Login</a>
      </div>
    </footer>`;

// --- 4. PAGE-SPECIFIC LOGIC ---
function renderPage() {
    languageManager.getLanguage();
    document.getElementById('header-container').innerHTML = createHeaderHTML(INITIAL_CATEGORIES);
    document.getElementById('footer-container').innerHTML = createFooterHTML(INITIAL_CATEGORIES);

    const mainContent = document.getElementById('main-content');
    const urlParams = new URLSearchParams(window.location.search);
    const articleId = urlParams.get('id');
    const article = ALL_ARTICLES.find(a => a.id === articleId);

    if (!article) {
        mainContent.innerHTML = `<div class="text-center py-40"><h1 class="text-2xl font-bold">Artikel nicht gefunden</h1><a href="index.html" class="text-brand-copper mt-4 inline-block">Zurück zur Startseite</a></div>`;
        return;
    }
    
    document.title = `${article.title} | SHK Rhein-Neckar`;

    const t = languageManager.t;
    const isPage = article.type === 'page';
    const getYouTubeId = (url) => {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
        const match = url?.match(regExp);
        return (match && match[2].length === 11) ? match[2] : null;
    };
    const videoId = getYouTubeId(article.videoUrl);

    mainContent.innerHTML = `
    <article class="max-w-6xl mx-auto my-0 bg-white">
        <header class="px-4 py-16 md:py-24 text-center max-w-4xl mx-auto">
           ${!isPage ? `<div class="mb-8"><span class="inline-block px-4 py-1.5 text-xs font-bold uppercase tracking-[0.2em] text-white bg-brand-dark rounded-sm">${article.category}</span></div>` : ''}
           <h1 class="text-4xl md:text-6xl font-display font-black text-brand-dark leading-[1.1] mb-10 tracking-tight">${article.title}</h1>
           ${!isPage ? `
             <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8 text-sm text-brand-steel border-t border-b border-gray-100 py-6">
               <div class="flex items-center"><span class="font-bold text-brand-dark uppercase tracking-wide text-xs">${article.author}</span></div>
               <div class="hidden md:block w-px h-4 bg-gray-300"></div>
               <div class="flex items-center"><span class="uppercase tracking-wide text-xs">${new Date(article.publishedAt).toLocaleDateString()}</span></div>
                <div class="hidden md:block w-px h-4 bg-gray-300"></div>
               <div class="flex items-center text-gray-400 uppercase tracking-wide text-xs">${article.readTime ? Math.ceil(article.readTime / 60) : 5} ${t('article.read_time')}</div>
             </div>` : ''}
        </header>

        ${(article.imageUrl || videoId) ? `
        <div class="w-full aspect-video md:aspect-[21/9] overflow-hidden bg-gray-100 shadow-sm">
            ${videoId ? `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${videoId}?autoplay=0" title="${article.title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`
            : `<img src="${article.imageUrl}" alt="${article.title}" class="w-full h-full object-cover" />`}
        </div>` : ''}

        <div class="px-4 py-16 grid grid-cols-1 lg:grid-cols-12 gap-12 max-w-7xl mx-auto">
           ${!isPage ? `
           <div class="hidden lg:flex lg:col-span-2 flex-col items-center">
                <div class="sticky top-32 space-y-6 flex flex-col items-center">
                  <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest rotate-180 writing-mode-vertical mb-2">${t('article.share')}</span>
                </div>
           </div>` : ''}

           <div class="col-span-1 ${isPage ? 'lg:col-span-8 lg:col-start-3' : 'lg:col-span-8'}">
             <div class="prose prose-lg md:prose-xl prose-slate max-w-none text-gray-700 leading-loose prose-headings:font-display prose-headings:font-bold prose-headings:text-brand-dark">
               ${article.content}
             </div>
           </div>
        </div>
    </article>
    `;
    
    // Scroll progress listener
    window.addEventListener('scroll', () => {
      const totalScroll = document.documentElement.scrollTop;
      const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scroll = totalScroll / windowHeight;
      document.getElementById('progress-bar').style.width = `${scroll * 100}%`;
    });
}

// Initial Load
document.addEventListener('DOMContentLoaded', renderPage);

</script>
</body>
</html>
